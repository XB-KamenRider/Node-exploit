var events = require('events');
var eventEmitter = new events.EventEmitter();

// 监听器
var listener1 = function listener1(){
	console.log('监听1');
}
var listener2 = function listener2(){
	console.log('监听2');
}
var listener3 = function listener3(){
	console.log('监听3');
}

eventEmitter.addListener('connection',listener1);

eventEmitter.on('connection',listener2);

eventEmitter.addListener('connection',listener3);

var eventListeners = require('events').EventEmitter.listenerCount(eventEmitter,'connection');

console.log(eventListeners + '个监听器监听连接事件');

eventEmitter.emit('connection');

// 移除事件2监听
eventEmitter.removeListener('connection',listener2);
console.log('移除事件2监听')

eventEmitter.emit('connection');

eventListeners = require('events').EventEmitter.listenerCount(eventEmitter,'connection');

console.log(eventListeners + '个监听器监听连接事件');

console.log('执行完毕')

var eventEmitter = new events.EventEmitter();

eventEmitter.emit('error');
